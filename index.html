<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>All Season Pros — Bookings (Step 1)</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <style>
    :root {
      --brand: #198754;
      --brand-dark: #146c43;
    }
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:#f7f7f8; margin:0; }
    .navbar { box-shadow: 0 3px 10px rgba(0,0,0,0.06); }
    .hero {
      height: 380px;
      background: linear-gradient(180deg, rgba(25,135,84,0.9), rgba(25,135,84,0.8)), url('https://images.unsplash.com/photo-1501004318641-b39e6451bec6?q=80&w=1600&auto=format&fit=crop&ixlib=rb-4.0.3&s=9b5cda6d0b8f5f07372dc8e1f0b7b190') center/cover no-repeat;
      color: white;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
    }
    .hero h1 { font-weight:700; font-size:2.4rem; margin-bottom:.3rem; }
    .hero p { font-size:1.05rem; opacity:0.95; }

    section { padding:60px 0; }
    #map { height: 360px; border-radius:8px; box-shadow: 0 6px 20px rgba(0,0,0,0.08); }

    .card.service-card { transition: transform .25s ease, box-shadow .25s ease; }
    .card.service-card:hover { transform: translateY(-6px); box-shadow: 0 14px 40px rgba(0,0,0,0.12); }

    .team-member img { width:140px; height:140px; object-fit:cover; border-radius:50%; border:4px solid white; box-shadow:0 8px 20px rgba(0,0,0,0.08); }

    .btn-brand { background: var(--brand); border: none; color: #fff; }
    .btn-brand:hover { background: var(--brand-dark); }

    .accordion-button:not(.collapsed) { background: var(--brand); color:#fff; }
    .footer { padding:30px 0; background:#f1f3f5; text-align:center; }

    @media (max-width:767px) {
      .hero { height: 260px; padding: 1.5rem; }
      .hero h1 { font-size:1.6rem; }
    }
  </style>
</head>
<body>

  <!-- NAV -->
  <nav class="navbar navbar-expand-lg navbar-dark" style="background:var(--brand);">
    <div class="container">
      <a class="navbar-brand fw-bold" href="#">All Season Pros</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navMenu">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navMenu">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="#services">Services</a></li>
          <li class="nav-item"><a class="nav-link" href="#packages">Packages</a></li>
          <li class="nav-item"><a class="nav-link" href="#booking">Book</a></li>
          <li class="nav-item"><a class="nav-link" href="#team">Team</a></li>
          <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- HERO -->
  <header class="hero" id="home" role="banner">
    <div class="container">
      <h1>All Season Pros</h1>
      <p class="lead">Professional Lawn Care, Car Detailing & Seasonal Decorations — serving Bullitt, Meade, Radcliff & nearby</p>
      <div class="mt-3">
        <a class="btn btn-lg btn-light me-2" href="#services">Explore Services</a>
        <a class="btn btn-lg btn-brand" href="#booking">Book Now</a>
      </div>
    </div>
  </header>

  <!-- SERVICES -->
  <section id="services">
    <div class="container">
      <h2 class="text-center mb-4">Services</h2>
      <div class="row g-4">
        <div class="col-md-4">
          <div class="card service-card h-100">
            <img src="https://images.unsplash.com/photo-1501004318641-b39e6451bec6?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=9b5cda6d0b8f5f07372dc8e1f0b7b190" class="card-img-top" alt="Lawn Care">
            <div class="card-body">
              <h5 class="card-title">Lawn Care</h5>
              <p class="card-text">Mowing, edging, trimming, leaf/debris cleanup, seasonal fertilization and more.</p>
              <a class="btn btn-brand" href="#lawn-details">Details</a>
            </div>
          </div>
        </div>

        <div class="col-md-4">
          <div class="card service-card h-100">
            <img src="https://images.unsplash.com/photo-1542365887-7fd6a7e9d5c0?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=8a7bfbf3d1c05b8be1fef9d6fae5f4a9" class="card-img-top" alt="Car Detailing">
            <div class="card-body">
              <h5 class="card-title">Car Detailing</h5>
              <p class="card-text">Full interior & exterior detail, waxing, stain removal, and paint protection options.</p>
              <a class="btn btn-brand" href="#car-details">Details</a>
            </div>
          </div>
        </div>

        <div class="col-md-4">
          <div class="card service-card h-100">
            <img src="https://images.unsplash.com/photo-1602524812106-0d6bde24ce6c?q=80&w=1200&auto=format&fit=crop&ixlib=rb-4.0.3&s=1f3e7bb5fc3d7f7b4d2f5b69a8b3f2c4" class="card-img-top" alt="Decorations & Lights">
            <div class="card-body">
              <h5 class="card-title">Decoration Lights</h5>
              <p class="card-text">Seasonal & event lighting (Halloween, Christmas), installation and safe removal.</p>
              <a class="btn btn-brand" href="#decor-details">Details</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- PACKAGES -->
  <section id="packages" class="bg-white">
    <div class="container">
      <h2 class="text-center mb-4">Packages</h2>
      <div class="accordion" id="packagesAccordion">
        <div class="accordion-item">
          <h2 class="accordion-header" id="pkg1">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#pkg1c">Basic Package — $75/mo</button>
          </h2>
          <div id="pkg1c" class="accordion-collapse collapse" data-bs-parent="#packagesAccordion">
            <div class="accordion-body">Weekly lawn mowing OR monthly basic car detail OR single seasonal decor setup.</div>
          </div>
        </div>

        <div class="accordion-item">
          <h2 class="accordion-header" id="pkg2">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#pkg2c">Full Home Package — $250/mo</button>
          </h2>
          <div id="pkg2c" class="accordion-collapse collapse" data-bs-parent="#packagesAccordion">
            <div class="accordion-body">Weekly lawn care, monthly car detailing, quarterly decor/gutter checks and more.</div>
          </div>
        </div>

        <div class="accordion-item">
          <h2 class="accordion-header" id="pkg3">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#pkg3c">Deluxe — $350/mo</button>
          </h2>
          <div id="pkg3c" class="accordion-collapse collapse" data-bs-parent="#packagesAccordion">
            <div class="accordion-body">Everything in Full + priority scheduling, yearly painting check, custom add-ons.</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- BOOKING -->
  <section id="booking" class="py-5">
    <div class="container">
      <h2 class="text-center mb-4">Book Our Services</h2>

      <div class="row gy-4">
        <div class="col-lg-6">
          <div id="map"></div>
          <p class="text-muted small mt-2">Click a marker to auto-fill your location for booking.</p>
        </div>

        <div class="col-lg-6">
          <div class="card shadow-sm">
            <div class="card-body">
              <form id="bookingForm">
                <div class="mb-3">
                  <label class="form-label">Full name</label>
                  <input id="name" class="form-control" required>
                </div>
                <div class="mb-3">
                  <label class="form-label">Email</label>
                  <input id="email" type="email" class="form-control" required>
                </div>
                <div class="mb-3">
                  <label class="form-label">Phone</label>
                  <input id="phone" type="tel" class="form-control" required>
                </div>
                <div class="mb-3">
                  <label class="form-label">Service</label>
                  <select id="service" class="form-control" required>
                    <option value="">Choose a service</option>
                    <option> Lawn Care </option>
                    <option> Car Detailing </option>
                    <option> Decoration Lights </option>
                  </select>
                </div>
                <div class="mb-3">
                  <label class="form-label">Location</label>
                  <input id="booking-location" class="form-control" placeholder="Click map to choose area" required>
                </div>

                <div class="d-grid">
                  <button type="submit" class="btn btn-brand">Submit Booking</button>
                </div>

                <div id="successMsg" class="mt-3" role="status" aria-live="polite"></div>
              </form>
            </div>
          </div>
        </div>
      </div>

    </div>
  </section>

  <!-- TEAM -->
  <section id="team" class="bg-white py-5">
    <div class="container">
      <h2 class="text-center mb-4">Our Team</h2>
      <div id="teamGrid" class="row justify-content-center gy-4">
        <!-- team slots loaded from Firestore (or fallback below) -->
      </div>
    </div>
  </section>

  <!-- ABOUT -->
  <section id="about" class="py-5 text-center">
    <div class="container">
      <h3>About All Season Pros</h3>
      <p class="text-muted">We provide professional landscaping, car detailing and seasonal decoration services across Bullitt County, Meade County, Radcliff, West Point, Elizabethtown, Hillview, and Mt. Washington / Shepherdsville.</p>
    </div>
  </section>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="container">
      <small>© All Season Pros — <a href="tel:+15024287961">(502) 428-7961</a> — allseasonpros@example.com</small>
    </div>
  </footer>

  <!-- SCRIPTS: Bootstrap, Leaflet, Firebase (compat), then our app JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Firebase compat libraries -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

  <script>
    /***** FIREBASE CONFIG — using the project you provided (compat) *****/
    const firebaseConfig = {
      apiKey: "AIzaSyC0yuyzuARGQ2SemMLZXfE_awXnawNvAZM",
      authDomain: "all-season-pros.firebaseapp.com",
      projectId: "all-season-pros",
      storageBucket: "all-season-pros.firebasestorage.app",
      messagingSenderId: "119792283815",
      appId: "1:119792283815:web:43056bcf8211479b286b82",
      measurementId: "G-4HVLQL6SVF"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    /***** Leaflet map init *****/
    const map = L.map('map').setView([37.9, -85.5], 10);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19, attribution: '© OpenStreetMap contributors'
    }).addTo(map);

    // Service areas — markers (click to fill booking location). These are place markers, not strict polygons.
    const serviceLocations = {
      "Bullitt County": [37.984, -85.684],
      "Meade County": [37.890, -85.590],
      "Radcliff": [37.833, -85.898],
      "West Point": [37.945, -85.790],
      "Elizabethtown": [37.693, -85.859],
      "Hillview": [37.911, -85.637],
      "Mt. Washington": [38.033, -85.503]
    };

    Object.entries(serviceLocations).forEach(([name, coords]) => {
      const mk = L.marker(coords).addTo(map).bindPopup(name);
      mk.on('click', () => {
        document.getElementById('booking-location').value = name;
      });
    });

    /***** Booking form submission to Firestore *****/
    const bookingForm = document.getElementById('bookingForm');
    const successMsg = document.getElementById('successMsg');

    bookingForm.addEventListener('submit', async (e) => {
      e.preventDefault();
      successMsg.textContent = '';
      try {
        const name = document.getElementById('name').value.trim();
        const email = document.getElementById('email').value.trim();
        const phone = document.getElementById('phone').value.trim();
        const service = document.getElementById('service').value;
        const location = document.getElementById('booking-location').value.trim();

        if (!name || !email || !service || !location) {
          successMsg.innerHTML = '<span class="text-danger">Please fill all required fields.</span>';
          return;
        }

        await db.collection('bookings').add({
          name, email, phone, service, location,
          createdAt: firebase.firestore.FieldValue.serverTimestamp()
        });

        successMsg.innerHTML = '<span class="text-success">Booking submitted — thank you! We will contact you soon.</span>';
        bookingForm.reset();
      } catch (err) {
        console.error('booking error', err);
        successMsg.innerHTML = '<span class="text-danger">Error submitting booking. Try again later.</span>';
      }
    });

    /***** Load team from Firestore (if empty, display placeholders) *****/
    async function loadTeam() {
      try {
        const snapshot = await db.collection('team').orderBy('order','asc').get();
        const grid = document.getElementById('teamGrid');
        grid.innerHTML = '';

        if (snapshot.empty) {
          // fallback placeholders
          const placeholders = [
            {name: 'Kurt Miller', bio: 'Landscaping & lawn care expert', photo: 'https://via.placeholder.com/150'},
            {name: 'Braden Moore', bio: 'Car detailing specialist', photo: 'https://via.placeholder.com/150'},
            {name: 'Jamarion Ferguson', bio: 'Decoration & installation expert', photo: 'https://via.placeholder.com/150'},
          ];
          placeholders.push(...Array(3).fill({name:'Team Member', bio:'Coming soon', photo:'https://via.placeholder.com/150'}));
          placeholders.forEach((t) => addTeamCard(grid, t));
          return;
        }

        snapshot.forEach(doc => {
          const data = doc.data();
          addTeamCard(grid, data);
        });
      } catch (err) {
        console.error('loadTeam error', err);
      }
    }

    function addTeamCard(container, member) {
      const col = document.createElement('div');
      col.className = 'col-md-4 text-center';
      col.innerHTML = `
        <div class="p-3">
          <img src="${member.photo || 'https://via.placeholder.com/150'}" alt="${member.name || 'Team'}" class="team-member mb-3">
          <h5 class="mb-1">${member.name || 'Team Member'}</h5>
          <p class="text-muted small">${member.bio || ''}</p>
        </div>
      `;
      container.appendChild(col);
    }

    // initial load
    loadTeam();

    /***** Note: Admin auth and editing will be added in Step 2 *****/
  </script>
</body>
</html>


